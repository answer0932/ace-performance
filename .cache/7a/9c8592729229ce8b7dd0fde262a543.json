{"id":"../src/index.ts","dependencies":[{"name":"D:\\Performance\\yideng\\tsconfig.json","includedInParent":true,"mtime":1611841349000},{"name":"D:\\Performance\\yideng\\package.json","includedInParent":true,"mtime":1668341464587},{"name":"./config","loc":{"line":9,"column":23,"index":121},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\config\\index.ts"},{"name":"./data/constants","loc":{"line":10,"column":25,"index":159},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\data\\constants.ts"},{"name":"./data/log","loc":{"line":11,"column":24,"index":204},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\data\\log.ts"},{"name":"./performance/getNavigationTiming","loc":{"line":12,"column":36,"index":255},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\performance\\getNavigationTiming.ts"},{"name":"./performance/observe","loc":{"line":13,"column":72,"index":365},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\performance\\observe.ts"},{"name":"./tools/isSupported","loc":{"line":14,"column":39,"index":430},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\tools\\isSupported.ts"},{"name":"./error","loc":{"line":15,"column":23,"index":477},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\error\\index.ts"},{"name":"./data/analyticsTracker","loc":{"line":16,"column":29,"index":518},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\data\\analyticsTracker.ts"},{"name":"./data/ReportData","loc":{"line":17,"column":23,"index":569},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\data\\ReportData.ts"},{"name":"./helpers/onVisibilityChange","loc":{"line":18,"column":36,"index":627},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\helpers\\onVisibilityChange.ts"},{"name":"./helpers/getNetworkInformation","loc":{"line":19,"column":38,"index":698},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\helpers\\getNetworkInformation.ts"},{"name":"./data/storageEstimate","loc":{"line":20,"column":38,"index":772},"parent":"D:\\Performance\\yideng\\src\\index.ts","resolved":"D:\\Performance\\yideng\\src\\data\\storageEstimate.ts"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _config = require(\"./config\");\nvar _constants = require(\"./data/constants\");\nvar _log = require(\"./data/log\");\nvar _getNavigationTiming = require(\"./performance/getNavigationTiming\");\nvar _observe = require(\"./performance/observe\");\nvar _isSupported = require(\"./tools/isSupported\");\nvar _error = _interopRequireDefault(require(\"./error\"));\nvar _analyticsTracker2 = _interopRequireDefault(require(\"./data/analyticsTracker\"));\nvar _ReportData = _interopRequireDefault(require(\"./data/ReportData\"));\nvar _onVisibilityChange = require(\"./helpers/onVisibilityChange\");\nvar _getNetworkInformation = require(\"./helpers/getNetworkInformation\");\nvar _storageEstimate = require(\"./data/storageEstimate\");\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar ACE_Performance = /*#__PURE__*/_createClass(function ACE_Performance() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  _classCallCheck(this, ACE_Performance);\n  this.v = '1.0.0';\n  // 扩展基础配置\n  var logUrl = options.logUrl;\n  if (!logUrl) {\n    throw new Error(\"\\u4EAC\\u7A0B\\u4E00\\u706F\\u7CFB\\u7EDF\\u76D1\\u63A7\\u5E73\\u53F0\".concat(this.v, \"\\u63D0\\u793A\\u672A\\u4F20\\u9012logUrl\"));\n  }\n  //向后台输送数据\n  var insReportData = new _ReportData.default({\n    logUrl: logUrl\n  });\n  _config.config.reportData = insReportData;\n  //对外暴露上传接口\n  this.reportData = insReportData;\n  //集合数据汇总\n  var _analyticsTracker = options.analyticsTracker;\n  if (_analyticsTracker) {\n    _config.config.analyticsTracker = _analyticsTracker;\n  } else {\n    _config.config.analyticsTracker = _analyticsTracker2.default;\n  }\n  _config.config.isResourceTiming = !!options.resourceTiming;\n  _config.config.isElementTiming = !!options.elementTiming;\n  _config.config.maxTime = options.maxMeasureTime || _config.config.maxTime;\n  if (options.captureError) {\n    //开启错误跟踪\n    var errorTtace = new _error.default();\n    errorTtace.run();\n  }\n  //如果浏览器不支持性能指标只能放弃\n  if (!(0, _isSupported.isPerformanceSupported)()) {\n    return;\n  }\n  //浏览器支持的起FRP这样的Observer统计性能\n  if ('PerformanceObserver' in _constants.W) {\n    (0, _observe.initPerformanceObserver)();\n  }\n  //初始化\n  if (typeof _constants.D.hidden !== 'undefined') {\n    // Opera 12.10 and Firefox 18 and later support\n    _constants.D.addEventListener('visibilitychange', _onVisibilityChange.didVisibilityChange.bind(this, _observe.disconnectPerfObserversHidden));\n  }\n  //记录系统DNS请求+白屏时间等\n  (0, _log.logData)('navigationTiming', (0, _getNavigationTiming.getNavigationTiming)());\n  //记录用户的网速 H5+多普勒测速\n  (0, _log.logData)('networkInformation', (0, _getNetworkInformation.getNetworkInformation)());\n  //管理离线缓存数据\n  if (_constants.WN && _constants.WN.storage && typeof _constants.WN.storage.estimate === 'function') {\n    _constants.WN.storage.estimate().then(_storageEstimate.reportStorageEstimate);\n  }\n});\nexports.default = ACE_Performance;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/index.ts","name":null,"original":{"line":9,"column":0},"generated":{"line":7,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":10,"column":0},"generated":{"line":8,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":11,"column":0},"generated":{"line":9,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":12,"column":0},"generated":{"line":10,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":13,"column":0},"generated":{"line":11,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":17,"column":0},"generated":{"line":12,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":13,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":20,"column":0},"generated":{"line":14,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":21,"column":0},"generated":{"line":15,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":22,"column":0},"generated":{"line":16,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":23,"column":0},"generated":{"line":17,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":24,"column":0},"generated":{"line":18,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":24,"column":63},"generated":{"line":19,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":24,"column":63},"generated":{"line":20,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":24,"column":63},"generated":{"line":21,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":24,"column":63},"generated":{"line":22,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":24,"column":63},"generated":{"line":23,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":26,"column":21},"generated":{"line":23,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":26,"column":36},"generated":{"line":23,"column":19}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":1},"generated":{"line":23,"column":48}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":38},"generated":{"line":23,"column":75}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":38},"generated":{"line":24,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":13},"generated":{"line":24,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":13},"generated":{"line":24,"column":13}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":36},"generated":{"line":24,"column":84}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":36},"generated":{"line":24,"column":85}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":38},"generated":{"line":24,"column":86}},{"source":"../src/index.ts","name":null,"original":{"line":29,"column":38},"generated":{"line":25,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":26,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":26,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":27,"column":9},"generated":{"line":26,"column":7}},{"source":"../src/index.ts","name":null,"original":{"line":27,"column":10},"generated":{"line":26,"column":8}},{"source":"../src/index.ts","name":null,"original":{"line":27,"column":13},"generated":{"line":26,"column":11}},{"source":"../src/index.ts","name":null,"original":{"line":27,"column":20},"generated":{"line":26,"column":18}},{"source":"../src/index.ts","name":null,"original":{"line":30,"column":2},"generated":{"line":27,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":31,"column":2},"generated":{"line":28,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":31,"column":8},"generated":{"line":28,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":31,"column":14},"generated":{"line":28,"column":12}},{"source":"../src/index.ts","name":null,"original":{"line":31,"column":17},"generated":{"line":28,"column":15}},{"source":"../src/index.ts","name":null,"original":{"line":31,"column":24},"generated":{"line":28,"column":22}},{"source":"../src/index.ts","name":null,"original":{"line":31,"column":25},"generated":{"line":28,"column":23}},{"source":"../src/index.ts","name":null,"original":{"line":31,"column":31},"generated":{"line":28,"column":29}},{"source":"../src/index.ts","name":null,"original":{"line":32,"column":2},"generated":{"line":29,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":32,"column":6},"generated":{"line":29,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":32,"column":7},"generated":{"line":29,"column":7}},{"source":"../src/index.ts","name":null,"original":{"line":32,"column":13},"generated":{"line":29,"column":13}},{"source":"../src/index.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":29,"column":15}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":3},"generated":{"line":30,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":9},"generated":{"line":30,"column":10}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":30,"column":14}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":18},"generated":{"line":30,"column":19}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":32},"generated":{"line":30,"column":90}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":36},"generated":{"line":30,"column":94}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":37},"generated":{"line":30,"column":95}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":38},"generated":{"line":30,"column":96}},{"source":"../src/index.ts","name":null,"original":{"line":33,"column":52},"generated":{"line":30,"column":138}},{"source":"../src/index.ts","name":null,"original":{"line":35,"column":2},"generated":{"line":32,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":36,"column":2},"generated":{"line":33,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":36,"column":8},"generated":{"line":33,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":36,"column":21},"generated":{"line":33,"column":19}},{"source":"../src/index.ts","name":null,"original":{"line":36,"column":24},"generated":{"line":33,"column":22}},{"source":"../src/index.ts","name":null,"original":{"line":36,"column":28},"generated":{"line":33,"column":26}},{"source":"../src/index.ts","name":null,"original":{"line":36,"column":38},"generated":{"line":33,"column":45}},{"source":"../src/index.ts","name":null,"original":{"line":36,"column":39},"generated":{"line":33,"column":46}},{"source":"../src/index.ts","name":null,"original":{"line":37,"column":3},"generated":{"line":34,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":37,"column":9},"generated":{"line":34,"column":10}},{"source":"../src/index.ts","name":null,"original":{"line":37,"column":3},"generated":{"line":34,"column":12}},{"source":"../src/index.ts","name":null,"original":{"line":38,"column":3},"generated":{"line":35,"column":3}},{"source":"../src/index.ts","name":null,"original":{"line":38,"column":4},"generated":{"line":35,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":39,"column":2},"generated":{"line":36,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":39,"column":8},"generated":{"line":36,"column":16}},{"source":"../src/index.ts","name":null,"original":{"line":39,"column":9},"generated":{"line":36,"column":17}},{"source":"../src/index.ts","name":null,"original":{"line":39,"column":19},"generated":{"line":36,"column":27}},{"source":"../src/index.ts","name":null,"original":{"line":39,"column":22},"generated":{"line":36,"column":30}},{"source":"../src/index.ts","name":null,"original":{"line":39,"column":35},"generated":{"line":36,"column":43}},{"source":"../src/index.ts","name":null,"original":{"line":40,"column":2},"generated":{"line":37,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":41,"column":2},"generated":{"line":38,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":41,"column":6},"generated":{"line":38,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":41,"column":7},"generated":{"line":38,"column":7}},{"source":"../src/index.ts","name":null,"original":{"line":41,"column":17},"generated":{"line":38,"column":17}},{"source":"../src/index.ts","name":null,"original":{"line":41,"column":20},"generated":{"line":38,"column":20}},{"source":"../src/index.ts","name":null,"original":{"line":41,"column":33},"generated":{"line":38,"column":33}},{"source":"../src/index.ts","name":null,"original":{"line":42,"column":2},"generated":{"line":39,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":43,"column":2},"generated":{"line":40,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":43,"column":8},"generated":{"line":40,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":43,"column":25},"generated":{"line":40,"column":23}},{"source":"../src/index.ts","name":null,"original":{"line":43,"column":28},"generated":{"line":40,"column":26}},{"source":"../src/index.ts","name":null,"original":{"line":43,"column":35},"generated":{"line":40,"column":33}},{"source":"../src/index.ts","name":null,"original":{"line":43,"column":36},"generated":{"line":40,"column":34}},{"source":"../src/index.ts","name":null,"original":{"line":43,"column":52},"generated":{"line":40,"column":50}},{"source":"../src/index.ts","name":null,"original":{"line":44,"column":2},"generated":{"line":41,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":44,"column":6},"generated":{"line":41,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":44,"column":23},"generated":{"line":41,"column":23}},{"source":"../src/index.ts","name":null,"original":{"line":44,"column":25},"generated":{"line":41,"column":25}},{"source":"../src/index.ts","name":null,"original":{"line":45,"column":3},"generated":{"line":42,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":45,"column":9},"generated":{"line":42,"column":18}},{"source":"../src/index.ts","name":null,"original":{"line":45,"column":10},"generated":{"line":42,"column":19}},{"source":"../src/index.ts","name":null,"original":{"line":45,"column":26},"generated":{"line":42,"column":35}},{"source":"../src/index.ts","name":null,"original":{"line":45,"column":29},"generated":{"line":42,"column":38}},{"source":"../src/index.ts","name":null,"original":{"line":45,"column":46},"generated":{"line":42,"column":55}},{"source":"../src/index.ts","name":null,"original":{"line":46,"column":3},"generated":{"line":43,"column":3}},{"source":"../src/index.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":43,"column":9}},{"source":"../src/index.ts","name":null,"original":{"line":47,"column":3},"generated":{"line":44,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":47,"column":9},"generated":{"line":44,"column":18}},{"source":"../src/index.ts","name":null,"original":{"line":47,"column":10},"generated":{"line":44,"column":19}},{"source":"../src/index.ts","name":null,"original":{"line":47,"column":26},"generated":{"line":44,"column":35}},{"source":"../src/index.ts","name":null,"original":{"line":47,"column":29},"generated":{"line":44,"column":38}},{"source":"../src/index.ts","name":null,"original":{"line":47,"column":45},"generated":{"line":44,"column":64}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":2},"generated":{"line":46,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":8},"generated":{"line":46,"column":16}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":9},"generated":{"line":46,"column":17}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":25},"generated":{"line":46,"column":33}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":28},"generated":{"line":46,"column":36}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":29},"generated":{"line":46,"column":37}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":30},"generated":{"line":46,"column":38}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":37},"generated":{"line":46,"column":45}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":38},"generated":{"line":46,"column":46}},{"source":"../src/index.ts","name":null,"original":{"line":49,"column":52},"generated":{"line":46,"column":60}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":2},"generated":{"line":47,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":8},"generated":{"line":47,"column":16}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":9},"generated":{"line":47,"column":17}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":24},"generated":{"line":47,"column":32}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":27},"generated":{"line":47,"column":35}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":28},"generated":{"line":47,"column":36}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":29},"generated":{"line":47,"column":37}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":36},"generated":{"line":47,"column":44}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":37},"generated":{"line":47,"column":45}},{"source":"../src/index.ts","name":null,"original":{"line":50,"column":50},"generated":{"line":47,"column":58}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":2},"generated":{"line":48,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":8},"generated":{"line":48,"column":16}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":9},"generated":{"line":48,"column":17}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":48,"column":24}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":19},"generated":{"line":48,"column":27}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":26},"generated":{"line":48,"column":34}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":27},"generated":{"line":48,"column":35}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":41},"generated":{"line":48,"column":49}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":45},"generated":{"line":48,"column":53}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":51},"generated":{"line":48,"column":67}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":52},"generated":{"line":48,"column":68}},{"source":"../src/index.ts","name":null,"original":{"line":51,"column":59},"generated":{"line":48,"column":75}},{"source":"../src/index.ts","name":null,"original":{"line":53,"column":2},"generated":{"line":49,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":53,"column":6},"generated":{"line":49,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":53,"column":13},"generated":{"line":49,"column":13}},{"source":"../src/index.ts","name":null,"original":{"line":53,"column":14},"generated":{"line":49,"column":14}},{"source":"../src/index.ts","name":null,"original":{"line":53,"column":26},"generated":{"line":49,"column":26}},{"source":"../src/index.ts","name":null,"original":{"line":53,"column":28},"generated":{"line":49,"column":28}},{"source":"../src/index.ts","name":null,"original":{"line":54,"column":3},"generated":{"line":50,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":55,"column":3},"generated":{"line":51,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":55,"column":9},"generated":{"line":51,"column":8}},{"source":"../src/index.ts","name":null,"original":{"line":55,"column":19},"generated":{"line":51,"column":18}},{"source":"../src/index.ts","name":null,"original":{"line":55,"column":22},"generated":{"line":51,"column":21}},{"source":"../src/index.ts","name":null,"original":{"line":55,"column":26},"generated":{"line":51,"column":25}},{"source":"../src/index.ts","name":null,"original":{"line":55,"column":36},"generated":{"line":51,"column":39}},{"source":"../src/index.ts","name":null,"original":{"line":55,"column":38},"generated":{"line":51,"column":41}},{"source":"../src/index.ts","name":null,"original":{"line":56,"column":3},"generated":{"line":52,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":56,"column":13},"generated":{"line":52,"column":14}},{"source":"../src/index.ts","name":null,"original":{"line":56,"column":14},"generated":{"line":52,"column":15}},{"source":"../src/index.ts","name":null,"original":{"line":56,"column":17},"generated":{"line":52,"column":18}},{"source":"../src/index.ts","name":null,"original":{"line":56,"column":19},"generated":{"line":52,"column":20}},{"source":"../src/index.ts","name":null,"original":{"line":59,"column":2},"generated":{"line":54,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":60,"column":2},"generated":{"line":55,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":60,"column":6},"generated":{"line":55,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":60,"column":7},"generated":{"line":55,"column":7}},{"source":"../src/index.ts","name":null,"original":{"line":60,"column":7},"generated":{"line":55,"column":11}},{"source":"../src/index.ts","name":null,"original":{"line":60,"column":29},"generated":{"line":55,"column":46}},{"source":"../src/index.ts","name":null,"original":{"line":60,"column":31},"generated":{"line":55,"column":49}},{"source":"../src/index.ts","name":null,"original":{"line":60,"column":33},"generated":{"line":55,"column":51}},{"source":"../src/index.ts","name":null,"original":{"line":61,"column":3},"generated":{"line":56,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":63,"column":2},"generated":{"line":58,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":64,"column":2},"generated":{"line":59,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":64,"column":6},"generated":{"line":59,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":64,"column":27},"generated":{"line":59,"column":27}},{"source":"../src/index.ts","name":null,"original":{"line":64,"column":31},"generated":{"line":59,"column":31}},{"source":"../src/index.ts","name":null,"original":{"line":64,"column":32},"generated":{"line":59,"column":43}},{"source":"../src/index.ts","name":null,"original":{"line":64,"column":34},"generated":{"line":59,"column":45}},{"source":"../src/index.ts","name":null,"original":{"line":65,"column":3},"generated":{"line":60,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":65,"column":3},"generated":{"line":60,"column":8}},{"source":"../src/index.ts","name":null,"original":{"line":65,"column":26},"generated":{"line":60,"column":40}},{"source":"../src/index.ts","name":null,"original":{"line":65,"column":28},"generated":{"line":60,"column":43}},{"source":"../src/index.ts","name":null,"original":{"line":67,"column":2},"generated":{"line":62,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":2},"generated":{"line":63,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":6},"generated":{"line":63,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":13},"generated":{"line":63,"column":13}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":14},"generated":{"line":63,"column":25}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":15},"generated":{"line":63,"column":26}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":21},"generated":{"line":63,"column":32}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":26},"generated":{"line":63,"column":37}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":37},"generated":{"line":63,"column":48}},{"source":"../src/index.ts","name":null,"original":{"line":68,"column":39},"generated":{"line":63,"column":50}},{"source":"../src/index.ts","name":null,"original":{"line":69,"column":3},"generated":{"line":64,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":70,"column":3},"generated":{"line":65,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":70,"column":4},"generated":{"line":65,"column":16}},{"source":"../src/index.ts","name":null,"original":{"line":70,"column":5},"generated":{"line":65,"column":17}},{"source":"../src/index.ts","name":null,"original":{"line":70,"column":21},"generated":{"line":65,"column":33}},{"source":"../src/index.ts","name":null,"original":{"line":71,"column":4},"generated":{"line":65,"column":34}},{"source":"../src/index.ts","name":null,"original":{"line":71,"column":22},"generated":{"line":65,"column":52}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":4},"generated":{"line":65,"column":54}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":23},"generated":{"line":65,"column":93}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":24},"generated":{"line":65,"column":94}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":28},"generated":{"line":65,"column":98}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":29},"generated":{"line":65,"column":99}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":33},"generated":{"line":65,"column":103}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":35},"generated":{"line":65,"column":105}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":64},"generated":{"line":65,"column":143}},{"source":"../src/index.ts","name":null,"original":{"line":72,"column":65},"generated":{"line":65,"column":144}},{"source":"../src/index.ts","name":null,"original":{"line":73,"column":4},"generated":{"line":65,"column":145}},{"source":"../src/index.ts","name":null,"original":{"line":75,"column":2},"generated":{"line":67,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":2},"generated":{"line":68,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":2},"generated":{"line":68,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":9},"generated":{"line":68,"column":18}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":10},"generated":{"line":68,"column":20}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":28},"generated":{"line":68,"column":38}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":30},"generated":{"line":68,"column":40}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":30},"generated":{"line":68,"column":44}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":49},"generated":{"line":68,"column":84}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":51},"generated":{"line":68,"column":87}},{"source":"../src/index.ts","name":null,"original":{"line":76,"column":52},"generated":{"line":68,"column":88}},{"source":"../src/index.ts","name":null,"original":{"line":77,"column":2},"generated":{"line":69,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":2},"generated":{"line":70,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":2},"generated":{"line":70,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":9},"generated":{"line":70,"column":18}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":10},"generated":{"line":70,"column":20}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":30},"generated":{"line":70,"column":40}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":32},"generated":{"line":70,"column":42}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":32},"generated":{"line":70,"column":46}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":53},"generated":{"line":70,"column":90}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":55},"generated":{"line":70,"column":93}},{"source":"../src/index.ts","name":null,"original":{"line":78,"column":56},"generated":{"line":70,"column":94}},{"source":"../src/index.ts","name":null,"original":{"line":79,"column":2},"generated":{"line":71,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":2},"generated":{"line":72,"column":2}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":6},"generated":{"line":72,"column":6}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":8},"generated":{"line":72,"column":19}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":12},"generated":{"line":72,"column":23}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":14},"generated":{"line":72,"column":36}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":15},"generated":{"line":72,"column":37}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":22},"generated":{"line":72,"column":44}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":26},"generated":{"line":72,"column":48}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":33},"generated":{"line":72,"column":55}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":35},"generated":{"line":72,"column":68}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":36},"generated":{"line":72,"column":69}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":43},"generated":{"line":72,"column":76}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":44},"generated":{"line":72,"column":77}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":52},"generated":{"line":72,"column":85}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":57},"generated":{"line":72,"column":90}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":67},"generated":{"line":72,"column":100}},{"source":"../src/index.ts","name":null,"original":{"line":80,"column":69},"generated":{"line":72,"column":102}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":3},"generated":{"line":73,"column":4}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":5},"generated":{"line":73,"column":17}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":6},"generated":{"line":73,"column":18}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":13},"generated":{"line":73,"column":25}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":14},"generated":{"line":73,"column":26}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":22},"generated":{"line":73,"column":34}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":24},"generated":{"line":73,"column":36}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":25},"generated":{"line":73,"column":37}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":29},"generated":{"line":73,"column":41}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":30},"generated":{"line":73,"column":42}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":51},"generated":{"line":73,"column":80}},{"source":"../src/index.ts","name":null,"original":{"line":81,"column":52},"generated":{"line":73,"column":81}},{"source":"../src/index.ts","name":null,"original":{"line":83,"column":1},"generated":{"line":75,"column":0}},{"source":"../src/index.ts","name":null,"original":{"line":83,"column":2},"generated":{"line":75,"column":1}},{"source":"../src/index.ts","name":null,"original":{"line":83,"column":2},"generated":{"line":76,"column":0}}],"sources":{"../src/index.ts":"/**\n * 一款免费的开源性能监控SDK\n *\n * @remarks\n * 目前能够完成监控的指标包含FCP等\n *\n * @packageDocumentation\n */\nimport { config } from './config';\nimport { D, W, WN, WP } from './data/constants';\nimport { logData } from './data/log';\nimport { getNavigationTiming } from './performance/getNavigationTiming';\nimport {\n\tdisconnectPerfObserversHidden,\n\tinitPerformanceObserver,\n} from './performance/observe';\nimport { isPerformanceSupported } from './tools/isSupported';\nimport { IReportData, ACE_Options } from './typings/types';\nimport ErrorTrace from './error';\nimport analyticsTracker from './data/analyticsTracker';\nimport ReportData from './data/ReportData';\nimport { didVisibilityChange } from './helpers/onVisibilityChange';\nimport { getNetworkInformation } from './helpers/getNetworkInformation';\nimport { reportStorageEstimate } from './data/storageEstimate';\n\nexport default class ACE_Performance {\n\tprivate v = '1.0.0';\n\tprivate reportData: IReportData;\n\tconstructor(options: ACE_Options = {}) {\n\t\t// 扩展基础配置\n\t\tconst logUrl = options.logUrl;\n\t\tif (!logUrl) {\n\t\t\tthrow new Error(`京程一灯系统监控平台${this.v}提示未传递logUrl`);\n\t\t}\n\t\t//向后台输送数据\n\t\tconst insReportData = new ReportData({\n\t\t\tlogUrl,\n\t\t});\n\t\tconfig.reportData = insReportData;\n\t\t//对外暴露上传接口\n\t\tthis.reportData = insReportData;\n\t\t//集合数据汇总\n\t\tconst _analyticsTracker = options.analyticsTracker;\n\t\tif (_analyticsTracker) {\n\t\t\tconfig.analyticsTracker = _analyticsTracker;\n\t\t} else {\n\t\t\tconfig.analyticsTracker = analyticsTracker;\n\t\t}\n\t\tconfig.isResourceTiming = !!options.resourceTiming;\n\t\tconfig.isElementTiming = !!options.elementTiming;\n\t\tconfig.maxTime = options.maxMeasureTime || config.maxTime;\n\n\t\tif (options.captureError) {\n\t\t\t//开启错误跟踪\n\t\t\tconst errorTtace = new ErrorTrace();\n\t\t\terrorTtace.run();\n\t\t}\n\n\t\t//如果浏览器不支持性能指标只能放弃\n\t\tif (!isPerformanceSupported()) {\n\t\t\treturn;\n\t\t}\n\t\t//浏览器支持的起FRP这样的Observer统计性能\n\t\tif ('PerformanceObserver' in W) {\n\t\t\tinitPerformanceObserver();\n\t\t}\n\t\t//初始化\n\t\tif (typeof D.hidden !== 'undefined') {\n\t\t\t// Opera 12.10 and Firefox 18 and later support\n\t\t\tD.addEventListener(\n\t\t\t\t'visibilitychange',\n\t\t\t\tdidVisibilityChange.bind(this, disconnectPerfObserversHidden)\n\t\t\t);\n\t\t}\n\t\t//记录系统DNS请求+白屏时间等\n\t\tlogData('navigationTiming', getNavigationTiming());\n\t\t//记录用户的网速 H5+多普勒测速\n\t\tlogData('networkInformation', getNetworkInformation());\n\t\t//管理离线缓存数据\n\t\tif (WN && WN.storage && typeof WN.storage.estimate === 'function') {\n\t\t\tWN.storage.estimate().then(reportStorageEstimate);\n\t\t}\n\t}\n}\n"},"lineCount":null}},"error":null,"hash":"b1311cf1201a7eb7f4492374535f607c","cacheData":{"env":{}}}